"0",""
"0"," "
"0",""
"0","#library(RPostgreSQL) "
"0","#drv <- dbDriver(""PostgreSQL"") "
"0","conn <- dbConnect(drv,dbname=""bderamo2021_gold"", host=""10.200.31.73"",port=5432,user=""eramo_gold"",password=""ERAMO_GOLD"") "
"0",""
"0","datos <- dbGetQuery(conn,"" "
"0","select rp.descrip registro, count(*) frec  "
"0","from catalogos.si_no rp left join explotacion.establecimientos est on rp.gid = est.registro where rp.gid not in (4,5) group by rp.descrip order by rp.descrip;"") "
"0",""
"0","library(plotly) "
"0",""
"0","colors <- colorRampPalette(c(""#68912B"",""#AB7A5A""))(3) "
"0",""
"0","fig <- plot_ly(data, labels = ~registro, values = ~frec, type = 'pie', "
"0","textposition = 'outside', "
"0","textinfo = 'percent', "
"0","hoverinfo = 'text', "
"0","text = ~paste('',registro , ''), "
"0","marker = list(colors = colors, "
"0","line = list(color = '#FFFFFF', width = 1)), "
"0","showlegend = T) "
"0","fig <- fig %>% layout(title = '1.5.a.  Porcentaje de establecimientos que llevan un registro <br>en el manejo o desperdicio de sus productos', "
"0","xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE), "
"0","yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)) "
"0",""
"0"," #dbDisconnect(conn)"
"0",""
"0","fig "
"2","Error in eval(expr, data, expr_env) : objeto 'registro' no encontrado
"
