"0",""
"0","#library(RPostgreSQL)"
"0","#drv <- dbDriver(""PostgreSQL"")"
"0","#conn <- dbConnect(drv,dbname=""bderamo2021_gold"", host=""10.200.31.73"",port=5432,user=""eramo_gold"",password=""ERAMO_GOLD"")"
"0",""
"0","datos <- dbGetQuery(conn,""Select producto, sum(ha_prod) ha_prod"
"0","From"
"0","  (Select b.descrip producto, sum(ha_producto) ha_prod"
"0","   From explotacion.productos_agricola a"
"0","   Join catalogos.prod_agricola b on a.producto_a = b.gid"
"0","   where b.descrip not in ('Otro producto 1', 'Otro producto 2', 'Otro producto 3')"
"0","   Group by b.descrip"
"0","Union "
"0","	Select nom_otro_producto_a producto, sum(ha_producto) ha_prod"
"0","  	 From explotacion.productos_agricola a"
"0","  	 Join explotacion.agropecuario b on a.id_agrop = b.id_agrop"
"0","  	 Where producto_a = 901 "
"0","  	 Group by nom_otro_producto_a "
"0","   Union"
"0","  	 Select nom_otro_producto_a producto, sum(ha_producto) ha_prod"
"0","  	 From explotacion.productos_agricola a"
"0","  	 Join explotacion.agropecuario b on a.id_agrop = b.id_agrop"
"0","  	 Where producto_a = 902"
"0","  	 Group by nom_otro_producto_a"
"0","  Union"
"0","  	Select nom_otro_producto_a producto, sum(ha_producto) ha_prod"
"0","  	From explotacion.productos_agricola a"
"0","  	Join explotacion.agropecuario b on a.id_agrop = b.id_agrop "
"0","  	Where producto_a = 903"
"0","  	Group by nom_otro_producto_a) otros"
"0","Group by producto, ha_prod"
"0","Order by ha_prod asc"");"
"0",""
"0","library(plotly)"
"0","data <- datos[,c('producto', 'ha_prod')]"
"0","fig <- plot_ly(data, x = ~producto, y = ~ha_prod, type = 'bar', "
"0","      marker = list(color = '#68912B'))"
"0",""
"0","fig <- fig %>% layout(title=(""""),"
"0","xaxis = list(title = ""Producto"", categoryorder = ""total descending""),"
"0","yaxis = list(title = ""Hectáreas""))"
"0",""
"0","#dbDisconnect(conn)"
"0","#1.5. Cantidad de héctareas acumuladas en los productos agrícolas para cultivar/sembrar "
"0",""
"0","fig"
