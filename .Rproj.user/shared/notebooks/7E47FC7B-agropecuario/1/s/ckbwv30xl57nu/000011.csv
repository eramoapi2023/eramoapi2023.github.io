"0",""
"0","#library(RPostgreSQL)"
"0",""
"0","#drv <- dbDriver(""PostgreSQL"")"
"0","#conn <- dbConnect(drv,dbname=""bderamo2021_gold"", host=""10.200.31.73"",port=5432,user=""eramo_gold"",password=""ERAMO_GOLD"")"
"0",""
"0","datos <- dbGetQuery(conn,""select resp, round(frec::numeric/cant*100, 2) porc"
"0","from"
"0","(select b.descrip as resp, count(*) frec,"
"0","		(select count(*) from explotacion.agropecuario where esp_alterna_a <> 7) cant"
"0","	from explotacion.agropecuario a"
"0","	join catalogos.alternativa_agricola b"
"0","	on a.esp_alterna_a = b.gid"
"0","	where esp_alterna_a <> 7"
"0","	group by b.descrip"
"0",") as query"
"0","order by porc desc;"")"
"0",""
"0","library(plotly)"
"0","data <- datos[,c('resp', 'porc')]"
"0","fig <- plot_ly(data, x = ~resp, y = ~porc, type = 'bar', "
"0","marker = list(color = '#68921B'))"
"0",""
"0","fig <- fig %>% layout(title=(""""),"
"0","xaxis = list(title = ""Alternativa"", categoryorder = ""total descending""),"
"0","yaxis = list(title = ""Porcentaje""))"
"0",""
"0","#dbDisconnect(conn)"
"0",""
"0","fig"
